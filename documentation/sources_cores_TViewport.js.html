<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>sources/cores/TViewport.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ASCLoader.html">ASCLoader</a></li><li><a href="BinaryReader.html">BinaryReader</a></li><li><a href="ClassName.html">ClassName</a></li><li><a href="DBFLoader.html">DBFLoader</a></li><li><a href="FBXLoader2.html">FBXLoader2</a></li><li><a href="MeshManager.html">MeshManager</a></li><li><a href="RZMLLoader.html">RZMLLoader</a></li><li><a href="SHPLoader.html">SHPLoader</a></li><li><a href="TAppBar.html">TAppBar</a></li><li><a href="TApplication.html">TApplication</a></li><li><a href="TBoundingBox.html">TBoundingBox</a></li><li><a href="TCache.html">TCache</a><ul class='methods'><li data-type='method'><a href="TCache.html#add">add</a></li><li data-type='method'><a href="TCache.html#clear">clear</a></li><li data-type='method'><a href="TCache.html#get">get</a></li><li data-type='method'><a href="TCache.html#remove">remove</a></li></ul></li><li><a href="TCameraPathController.html">TCameraPathController</a></li><li><a href="TCube.html">TCube</a></li><li><a href="TDataBaseManager.html">TDataBaseManager</a><ul class='methods'><li data-type='method'><a href="TDataBaseManager.html#._statusOk">_statusOk</a></li><li data-type='method'><a href="TDataBaseManager.html#.requestServer">requestServer</a></li><li data-type='method'><a href="TDataBaseManager.html#_create">_create</a></li><li data-type='method'><a href="TDataBaseManager.html#_deleteOne">_deleteOne</a></li><li data-type='method'><a href="TDataBaseManager.html#_deleteSome">_deleteSome</a></li><li data-type='method'><a href="TDataBaseManager.html#_onArrayBuffer">_onArrayBuffer</a></li><li data-type='method'><a href="TDataBaseManager.html#_onBlob">_onBlob</a></li><li data-type='method'><a href="TDataBaseManager.html#_onError">_onError</a></li><li data-type='method'><a href="TDataBaseManager.html#_onJson">_onJson</a></li><li data-type='method'><a href="TDataBaseManager.html#_onLoad">_onLoad</a></li><li data-type='method'><a href="TDataBaseManager.html#_onProgress">_onProgress</a></li><li data-type='method'><a href="TDataBaseManager.html#_onText">_onText</a></li><li data-type='method'><a href="TDataBaseManager.html#_readOne">_readOne</a></li><li data-type='method'><a href="TDataBaseManager.html#_readSome">_readSome</a></li><li data-type='method'><a href="TDataBaseManager.html#_updateOne">_updateOne</a></li><li data-type='method'><a href="TDataBaseManager.html#_updateSome">_updateSome</a></li><li data-type='method'><a href="TDataBaseManager.html#create">create</a></li><li data-type='method'><a href="TDataBaseManager.html#delete">delete</a></li><li data-type='method'><a href="TDataBaseManager.html#read">read</a></li><li data-type='method'><a href="TDataBaseManager.html#update">update</a></li></ul></li><li><a href="TDateTime.html">TDateTime</a><ul class='methods'><li data-type='method'><a href="TDateTime.html#componentDidMount">componentDidMount</a></li><li data-type='method'><a href="TDateTime.html#render">render</a></li><li data-type='method'><a href="TDateTime.html#tick">tick</a></li></ul></li><li><a href="TDebugPanel.html">TDebugPanel</a></li><li><a href="TErrorCatcher.html">TErrorCatcher</a><ul class='methods'><li data-type='method'><a href="TErrorCatcher.html#componentDidCatch">componentDidCatch</a></li><li data-type='method'><a href="TErrorCatcher.html#render">render</a></li></ul></li><li><a href="TErrorManager.html">TErrorManager</a></li><li><a href="TFactory.html">TFactory</a></li><li><a href="TFile.html">TFile</a></li><li><a href="TGeometriesManager.html">TGeometriesManager</a><ul class='methods'><li data-type='method'><a href="TGeometriesManager.html#convertJsonToGeometry">convertJsonToGeometry</a></li></ul></li><li><a href="TKeyboardState.html">TKeyboardState</a></li><li><a href="TLogger.html">TLogger</a></li><li><a href="TMaterialsManager.html">TMaterialsManager</a></li><li><a href="TMouseController.html">TMouseController</a></li><li><a href="TObjectsManager.html">TObjectsManager</a></li><li><a href="Todo....html">.</a></li><li><a href="TOrbitControlsHelper.html">TOrbitControlsHelper</a></li><li><a href="TOrchestrator.html">TOrchestrator</a><ul class='methods'><li data-type='method'><a href="TOrchestrator.html#processQueue">processQueue</a></li></ul></li><li><a href="TPlanets.html">TPlanets</a></li><li><a href="TPointsManager.html">TPointsManager</a></li><li><a href="TProgressManager.html">TProgressManager</a></li><li><a href="TScenesManager.html">TScenesManager</a></li><li><a href="TToolBar.html">TToolBar</a></li><li><a href="TTrigonometricCircle.html">TTrigonometricCircle</a></li><li><a href="TTrigonometricCone.html">TTrigonometricCone</a></li><li><a href="TUniversalLoader.html">TUniversalLoader</a></li><li><a href="TViewport.html">TViewport</a></li></ul><h3>Modules</h3><ul><li><a href="module-config_babelConfiguration.html">config/babelConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_babelConfiguration.html#~CreateBabelConfiguration">CreateBabelConfiguration</a></li></ul></li><li><a href="module-config_eslintConfiguration.html">config/eslintConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_eslintConfiguration.html#~CreateEslintConfiguration">CreateEslintConfiguration</a></li></ul></li><li><a href="module-config_jsdocConfiguration.html">config/jsdocConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_jsdocConfiguration.html#~CreateJsdocConfiguration">CreateJsdocConfiguration</a></li></ul></li><li><a href="module-config_karmaBenchConfiguration.html">config/karmaBenchConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_karmaBenchConfiguration.html#~CreateKarmaBenchmarkConfiguration">CreateKarmaBenchmarkConfiguration</a></li></ul></li><li><a href="module-config_karmaUnitConfiguration.html">config/karmaUnitConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_karmaUnitConfiguration.html#~CreateKarmaUnitTestingConfiguration">CreateKarmaUnitTestingConfiguration</a></li></ul></li><li><a href="module-config_rollupConfiguration.html">config/rollupConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_rollupConfiguration.html#~CreateRollupConfiguration">CreateRollupConfiguration</a></li></ul></li><li><a href="module-gulpfile.html">gulpfile</a><ul class='methods'><li data-type='method'><a href="module-gulpfile.html#~npmrunbench">npm run bench</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunbuild">npm run build</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunclean">npm run clean</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrundoc">npm run doc</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunlint">npm run lint</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunrelease">npm run release</a></li><li data-type='method'><a href="module-gulpfile.html#~npmruntest">npm run test</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrununit">npm run unit</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunhelpdefault">npm run help </a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#_convertToObjects">_convertToObjects</a></li><li><a href="global.html#_createCloudPoint">_createCloudPoint</a></li><li><a href="global.html#_createImagesPacks">_createImagesPacks</a></li><li><a href="global.html#_createSubCloudPoint">_createSubCloudPoint</a></li><li><a href="global.html#_formatObjectError">_formatObjectError</a></li><li><a href="global.html#_formatTrace">_formatTrace</a></li><li><a href="global.html#_getAndUpdateOffsetBy">_getAndUpdateOffsetBy</a></li><li><a href="global.html#_getCustomProperties">_getCustomProperties</a></li><li><a href="global.html#_getReferentialIntegrityProperties">_getReferentialIntegrityProperties</a></li><li><a href="global.html#_getStandardProperties">_getStandardProperties</a></li><li><a href="global.html#_initBuildingsOf">_initBuildingsOf</a></li><li><a href="global.html#_initCompanies">_initCompanies</a></li><li><a href="global.html#_initObjectsOf">_initObjectsOf</a></li><li><a href="global.html#_initScenesOf">_initScenesOf</a></li><li><a href="global.html#_initSitesOf">_initSitesOf</a></li><li><a href="global.html#_isValidVersion">_isValidVersion</a></li><li><a href="global.html#_levelToString">_levelToString</a></li><li><a href="global.html#_loadAsc">_loadAsc</a></li><li><a href="global.html#_loadDbf">_loadDbf</a></li><li><a href="global.html#_loadFbx">_loadFbx</a></li><li><a href="global.html#_loadJson">_loadJson</a></li><li><a href="global.html#_loadObj">_loadObj</a></li><li><a href="global.html#_loadObjMtlCouple">_loadObjMtlCouple</a></li><li><a href="global.html#_loadShp">_loadShp</a></li><li><a href="global.html#_loadShpDbfCouple">_loadShpDbfCouple</a></li><li><a href="global.html#_loadStl">_loadStl</a></li><li><a href="global.html#_offsetPoints">_offsetPoints</a></li><li><a href="global.html#_onJson">_onJson</a></li><li><a href="global.html#_parse">_parse</a></li><li><a href="global.html#_parseDatas">_parseDatas</a></li><li><a href="global.html#_parseFieldProperties">_parseFieldProperties</a></li><li><a href="global.html#_parseHeader">_parseHeader</a></li><li><a href="global.html#_parseHeaderV2">_parseHeaderV2</a></li><li><a href="global.html#_parseHeaderV2_5">_parseHeaderV2_5</a></li><li><a href="global.html#_parseHeaderV3">_parseHeaderV3</a></li><li><a href="global.html#_parseHeaderV4">_parseHeaderV4</a></li><li><a href="global.html#_parseLine">_parseLine</a></li><li><a href="global.html#_parseLineB">_parseLineB</a></li><li><a href="global.html#_parseLineC">_parseLineC</a></li><li><a href="global.html#_parseLines">_parseLines</a></li><li><a href="global.html#_parseLinesAsXYZ">_parseLinesAsXYZ</a></li><li><a href="global.html#_parseLinesAsXYZI">_parseLinesAsXYZI</a></li><li><a href="global.html#_parseLinesAsXYZInXnYnZ">_parseLinesAsXYZInXnYnZ</a></li><li><a href="global.html#_parseLinesAsXYZIRGB">_parseLinesAsXYZIRGB</a></li><li><a href="global.html#_parseLinesAsXYZIRGBnXnYnZ">_parseLinesAsXYZIRGBnXnYnZ</a></li><li><a href="global.html#_parseLinesAsXYZnXnYnZ">_parseLinesAsXYZnXnYnZ</a></li><li><a href="global.html#_parseLinesAsXYZRGB">_parseLinesAsXYZRGB</a></li><li><a href="global.html#_parseLinesAsXYZRGBnXnYnZ">_parseLinesAsXYZRGBnXnYnZ</a></li><li><a href="global.html#_parseMultiPatch">_parseMultiPatch</a></li><li><a href="global.html#_parseMultiPoint">_parseMultiPoint</a></li><li><a href="global.html#_parsePoint">_parsePoint</a></li><li><a href="global.html#_parsePolygon">_parsePolygon</a></li><li><a href="global.html#_parsePolyLine">_parsePolyLine</a></li><li><a href="global.html#_parseRecordHeader">_parseRecordHeader</a></li><li><a href="global.html#_processBuildings">_processBuildings</a></li><li><a href="global.html#_processCompanies">_processCompanies</a></li><li><a href="global.html#_processGeometries">_processGeometries</a></li><li><a href="global.html#_processMaterials">_processMaterials</a></li><li><a href="global.html#_processObjects">_processObjects</a></li><li><a href="global.html#_processScenes">_processScenes</a></li><li><a href="global.html#_processSites">_processSites</a></li><li><a href="global.html#_RingGeometry">_RingGeometry</a></li><li><a href="global.html#_toggleObjectVisibility">_toggleObjectVisibility</a></li><li><a href="global.html#_updateDataView">_updateDataView</a></li><li><a href="global.html#addObjectToModel">addObjectToModel</a></li><li><a href="global.html#addPointsFromBuffer">addPointsFromBuffer</a></li><li><a href="global.html#addRaycastables">addRaycastables</a></li><li><a href="global.html#append">append</a></li><li><a href="global.html#askUserForPosition">askUserForPosition</a></li><li><a href="global.html#autoRotate">autoRotate</a></li><li><a href="global.html#Byte">Byte</a></li><li><a href="global.html#celsiusToFahrenheit">celsiusToFahrenheit</a></li><li><a href="global.html#celsiusToKelvin">celsiusToKelvin</a></li><li><a href="global.html#changeMaterialSide">changeMaterialSide</a></li><li><a href="global.html#classNameify">classNameify</a></li><li><a href="global.html#computePoint">computePoint</a></li><li><a href="global.html#computePoints">computePoints</a></li><li><a href="global.html#computeSplinePath">computeSplinePath</a></li><li><a href="global.html#computeUrl">computeUrl</a></li><li><a href="global.html#constructor">constructor</a></li><li><a href="global.html#convertArrayBufferToString">convertArrayBufferToString</a></li><li><a href="global.html#convertJsonToMaterial">convertJsonToMaterial</a></li><li><a href="global.html#convertJsonToObject3D">convertJsonToObject3D</a></li><li><a href="global.html#convertLambert93CoordinatesToWebGLCoordinates">convertLambert93CoordinatesToWebGLCoordinates</a></li><li><a href="global.html#convertWebGLCoordinatesToLambert93Coordinates">convertWebGLCoordinatesToLambert93Coordinates</a></li><li><a href="global.html#convertWebGLRotationToTopogicalYawPitch">convertWebGLRotationToTopogicalYawPitch</a></li><li><a href="global.html#convertWebglVectorToTopologicVector">convertWebglVectorToTopologicVector</a></li><li><a href="global.html#createEarth">createEarth</a></li><li><a href="global.html#createEarthCloud">createEarthCloud</a></li><li><a href="global.html#createFlowParticlesGroup">createFlowParticlesGroup</a></li><li><a href="global.html#createInterval">createInterval</a></li><li><a href="global.html#createJupiter">createJupiter</a></li><li><a href="global.html#createMars">createMars</a></li><li><a href="global.html#createMercury">createMercury</a></li><li><a href="global.html#createMoon">createMoon</a></li><li><a href="global.html#createNeptune">createNeptune</a></li><li><a href="global.html#createNodesGroup">createNodesGroup</a></li><li><a href="global.html#createParticularEmbranchmentGroup">createParticularEmbranchmentGroup</a></li><li><a href="global.html#createPathGroup">createPathGroup</a></li><li><a href="global.html#createPluto">createPluto</a></li><li><a href="global.html#createPointCloudDataMap">createPointCloudDataMap</a></li><li><a href="global.html#createSamplingTable">createSamplingTable</a></li><li><a href="global.html#createSaturn">createSaturn</a></li><li><a href="global.html#createSaturnRing">createSaturnRing</a></li><li><a href="global.html#createSectionGroup">createSectionGroup</a></li><li><a href="global.html#createSprite">createSprite</a></li><li><a href="global.html#createSun">createSun</a></li><li><a href="global.html#createUranus">createUranus</a></li><li><a href="global.html#createUranusRing">createUranusRing</a></li><li><a href="global.html#createVenus">createVenus</a></li><li><a href="global.html#DataType">DataType</a></li><li><a href="global.html#DBFVersion">DBFVersion</a></li><li><a href="global.html#debug">debug</a></li><li><a href="global.html#decimateVisibleMeshes">decimateVisibleMeshes</a></li><li><a href="global.html#decreasePointCloudData">decreasePointCloudData</a></li><li><a href="global.html#DEFAULT_SETTINGS">DEFAULT_SETTINGS</a></li><li><a href="global.html#degreesFromRadians">degreesFromRadians</a></li><li><a href="global.html#degreesToRadians">degreesToRadians</a></li><li><a href="global.html#DeletedRecord">DeletedRecord</a></li><li><a href="global.html#dispatch">dispatch</a></li><li><a href="global.html#down">down</a></li><li><a href="global.html#Endianness">Endianness</a></li><li><a href="global.html#endianness">endianness</a></li><li><a href="global.html#endMeasure">endMeasure</a></li><li><a href="global.html#endOpacityAnimation">endOpacityAnimation</a></li><li><a href="global.html#error">error</a></li><li><a href="global.html#extend">extend</a></li><li><a href="global.html#extendObject">extendObject</a></li><li><a href="global.html#fahrenheitToCelsius">fahrenheitToCelsius</a></li><li><a href="global.html#fahrenheitToKelvin">fahrenheitToKelvin</a></li><li><a href="global.html#FileCode">FileCode</a></li><li><a href="global.html#FileFormat">FileFormat</a></li><li><a href="global.html#findIndex">findIndex</a></li><li><a href="global.html#getCenter">getCenter</a></li><li><a href="global.html#getChar">getChar</a></li><li><a href="global.html#getCosinus">getCosinus</a></li><li><a href="global.html#getCosinusForHeight">getCosinusForHeight</a></li><li><a href="global.html#getCurrentPathPosition">getCurrentPathPosition</a></li><li><a href="global.html#getDistanceFromStart">getDistanceFromStart</a></li><li><a href="global.html#getDouble">getDouble</a></li><li><a href="global.html#getFileExtension">getFileExtension</a></li><li><a href="global.html#getFileName">getFileName</a></li><li><a href="global.html#getFilePath">getFilePath</a></li><li><a href="global.html#getFloat">getFloat</a></li><li><a href="global.html#getInt8">getInt8</a></li><li><a href="global.html#getInt16">getInt16</a></li><li><a href="global.html#getInt32">getInt32</a></li><li><a href="global.html#getNextPathPosition">getNextPathPosition</a></li><li><a href="global.html#getOffset">getOffset</a></li><li><a href="global.html#getPitch">getPitch</a></li><li><a href="global.html#getPointClouds">getPointClouds</a></li><li><a href="global.html#getRadius">getRadius</a></li><li><a href="global.html#getRandomArbitrary">getRandomArbitrary</a></li><li><a href="global.html#getRandomInt">getRandomInt</a></li><li><a href="global.html#getSamplingForDistanceToCamera">getSamplingForDistanceToCamera</a></li><li><a href="global.html#getSinus">getSinus</a></li><li><a href="global.html#getSinusForHeight">getSinusForHeight</a></li><li><a href="global.html#getString">getString</a></li><li><a href="global.html#getTemplate">getTemplate</a></li><li><a href="global.html#getUInt8">getUInt8</a></li><li><a href="global.html#getUInt16">getUInt16</a></li><li><a href="global.html#getUInt32">getUInt32</a></li><li><a href="global.html#getYaw">getYaw</a></li><li><a href="global.html#goTo">goTo</a></li><li><a href="global.html#HttpStatusCode">HttpStatusCode</a></li><li><a href="global.html#HttpVerb">HttpVerb</a></li><li><a href="global.html#increasePointCloudData">increasePointCloudData</a></li><li><a href="global.html#increment">increment</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initEvents">initEvents</a></li><li><a href="global.html#insertTreeViewItem">insertTreeViewItem</a></li><li><a href="global.html#isArray">isArray</a></li><li><a href="global.html#isArrayOfArray">isArrayOfArray</a></li><li><a href="global.html#isArrayOfEmpty">isArrayOfEmpty</a></li><li><a href="global.html#isArrayOfEmptyObject">isArrayOfEmptyObject</a></li><li><a href="global.html#isArrayOfEmptyString">isArrayOfEmptyString</a></li><li><a href="global.html#isArrayOfNull">isArrayOfNull</a></li><li><a href="global.html#isArrayOfObject">isArrayOfObject</a></li><li><a href="global.html#isArrayOfString">isArrayOfString</a></li><li><a href="global.html#isArrayOfUndefined">isArrayOfUndefined</a></li><li><a href="global.html#isBool">isBool</a></li><li><a href="global.html#isCelsius">isCelsius</a></li><li><a href="global.html#isDefined">isDefined</a></li><li><a href="global.html#isEmpty">isEmpty</a></li><li><a href="global.html#isEmptyArray">isEmptyArray</a></li><li><a href="global.html#isEmptyObject">isEmptyObject</a></li><li><a href="global.html#isEmptyString">isEmptyString</a></li><li><a href="global.html#isEndOfFile">isEndOfFile</a></li><li><a href="global.html#isFahrenheit">isFahrenheit</a></li><li><a href="global.html#isFinite">isFinite</a></li><li><a href="global.html#isFunction">isFunction</a></li><li><a href="global.html#isInfinite">isInfinite</a></li><li><a href="global.html#isInfiniteNegative">isInfiniteNegative</a></li><li><a href="global.html#isInfinitePositive">isInfinitePositive</a></li><li><a href="global.html#isKelvin">isKelvin</a></li><li><a href="global.html#isNotANumber">isNotANumber</a></li><li><a href="global.html#isNotArray">isNotArray</a></li><li><a href="global.html#isNotArrayOfArray">isNotArrayOfArray</a></li><li><a href="global.html#isNotArrayOfEmpty">isNotArrayOfEmpty</a></li><li><a href="global.html#isNotArrayOfEmptyObject">isNotArrayOfEmptyObject</a></li><li><a href="global.html#isNotArrayOfEmptyString">isNotArrayOfEmptyString</a></li><li><a href="global.html#isNotArrayOfNull">isNotArrayOfNull</a></li><li><a href="global.html#isNotArrayOfObject">isNotArrayOfObject</a></li><li><a href="global.html#isNotArrayOfString">isNotArrayOfString</a></li><li><a href="global.html#isNotArrayOfUndefined">isNotArrayOfUndefined</a></li><li><a href="global.html#isNotBool">isNotBool</a></li><li><a href="global.html#isNotCelsius">isNotCelsius</a></li><li><a href="global.html#isNotEmpty">isNotEmpty</a></li><li><a href="global.html#isNotEmptyArray">isNotEmptyArray</a></li><li><a href="global.html#isNotEmptyObject">isNotEmptyObject</a></li><li><a href="global.html#isNotEmptyObjectWithEmptyValues">isNotEmptyObjectWithEmptyValues</a></li><li><a href="global.html#isNotEmptyObjectWithNotEmptyValues">isNotEmptyObjectWithNotEmptyValues</a></li><li><a href="global.html#isNotEmptyString">isNotEmptyString</a></li><li><a href="global.html#isNotFahrenheit">isNotFahrenheit</a></li><li><a href="global.html#isNotFunction">isNotFunction</a></li><li><a href="global.html#isNotKelvin">isNotKelvin</a></li><li><a href="global.html#isNotNull">isNotNull</a></li><li><a href="global.html#isNotObject">isNotObject</a></li><li><a href="global.html#isNotString">isNotString</a></li><li><a href="global.html#isNotSymbol">isNotSymbol</a></li><li><a href="global.html#isNotSymbol2">isNotSymbol2</a></li><li><a href="global.html#isNotTemperature">isNotTemperature</a></li><li><a href="global.html#isNull">isNull</a></li><li><a href="global.html#isNumber">isNumber</a></li><li><a href="global.html#isNumberNegative">isNumberNegative</a></li><li><a href="global.html#isNumberPositive">isNumberPositive</a></li><li><a href="global.html#isObject">isObject</a></li><li><a href="global.html#isString">isString</a></li><li><a href="global.html#isSymbol">isSymbol</a></li><li><a href="global.html#isTemperature">isTemperature</a></li><li><a href="global.html#isUndefined">isUndefined</a></li><li><a href="global.html#k">k</a></li><li><a href="global.html#kelvinToCelsius">kelvinToCelsius</a></li><li><a href="global.html#kelvinToFahrenheit">kelvinToFahrenheit</a></li><li><a href="global.html#keyName">keyName</a></li><li><a href="global.html#Keys">Keys</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#loadAssociatedFiles">loadAssociatedFiles</a></li><li><a href="global.html#loadObjectFromURL">loadObjectFromURL</a></li><li><a href="global.html#loadSingleFile">loadSingleFile</a></li><li><a href="global.html#log">log</a></li><li><a href="global.html#LogLevel">LogLevel</a></li><li><a href="global.html#LogOutput">LogOutput</a></li><li><a href="global.html#lookAtPath">lookAtPath</a></li><li><a href="global.html#MinFileLength">MinFileLength</a></li><li><a href="global.html#MinVersion">MinVersion</a></li><li><a href="global.html#onKeyDown">onKeyDown</a></li><li><a href="global.html#onKeyUp">onKeyUp</a></li><li><a href="global.html#parse">parse</a></li><li><a href="global.html#parseColor">parseColor</a></li><li><a href="global.html#parseFloatArray">parseFloatArray</a></li><li><a href="global.html#parseIntArray">parseIntArray</a></li><li><a href="global.html#parseMatrixArray">parseMatrixArray</a></li><li><a href="global.html#parseVector3">parseVector3</a></li><li><a href="global.html#populateVisibleMeshes">populateVisibleMeshes</a></li><li><a href="global.html#popupImageShotModal">popupImageShotModal</a></li><li><a href="global.html#popupImportFilesModal">popupImportFilesModal</a></li><li><a href="global.html#popupSelectedObjectModal">popupSelectedObjectModal</a></li><li><a href="global.html#pressed">pressed</a></li><li><a href="global.html#queue">queue</a></li><li><a href="global.html#radiansFromDegrees">radiansFromDegrees</a></li><li><a href="global.html#radiansToDegrees">radiansToDegrees</a></li><li><a href="global.html#removeMeasure">removeMeasure</a></li><li><a href="global.html#removeTemporaryMeasure">removeTemporaryMeasure</a></li><li><a href="global.html#requestDataBuffer">requestDataBuffer</a></li><li><a href="global.html#resetDataPanel">resetDataPanel</a></li><li><a href="global.html#ResponseType">ResponseType</a></li><li><a href="global.html#ringClockwise">ringClockwise</a></li><li><a href="global.html#ringContains">ringContains</a></li><li><a href="global.html#ringContainsSome">ringContainsSome</a></li><li><a href="global.html#segmentContains">segmentContains</a></li><li><a href="global.html#selectObject">selectObject</a></li><li><a href="global.html#serializeObject">serializeObject</a></li><li><a href="global.html#setBuffer">setBuffer</a></li><li><a href="global.html#setCameraControls">setCameraControls</a></li><li><a href="global.html#setCameraEffect">setCameraEffect</a></li><li><a href="global.html#setCameraMode">setCameraMode</a></li><li><a href="global.html#setCameraPosition">setCameraPosition</a></li><li><a href="global.html#setEndianess">setEndianess</a></li><li><a href="global.html#setGlobalOffset">setGlobalOffset</a></li><li><a href="global.html#setGroupVisibility">setGroupVisibility</a></li><li><a href="global.html#setLayerGroupVisibility">setLayerGroupVisibility</a></li><li><a href="global.html#setMapViewer">setMapViewer</a></li><li><a href="global.html#setMaximumSamplingLimit">setMaximumSamplingLimit</a></li><li><a href="global.html#setMinimumSamplingLimit">setMinimumSamplingLimit</a></li><li><a href="global.html#setMouseQuat">setMouseQuat</a></li><li><a href="global.html#setOffset">setOffset</a></li><li><a href="global.html#setPath">setPath</a></li><li><a href="global.html#setPaths">setPaths</a></li><li><a href="global.html#setPosition">setPosition</a></li><li><a href="global.html#setRendersEffect">setRendersEffect</a></li><li><a href="global.html#ShapeType">ShapeType</a></li><li><a href="global.html#singletonInstance">singletonInstance</a></li><li><a href="global.html#skipOffsetOf">skipOffsetOf</a></li><li><a href="global.html#skipOffsetTo">skipOffsetTo</a></li><li><a href="global.html#slice">slice</a></li><li><a href="global.html#startMeasure">startMeasure</a></li><li><a href="global.html#startOpacityAnimation">startOpacityAnimation</a></li><li><a href="global.html#status">status</a></li><li><a href="global.html#Terminator">Terminator</a></li><li><a href="global.html#TFresnelBlueShader">TFresnelBlueShader</a></li><li><a href="global.html#TFresnelGreenShader">TFresnelGreenShader</a></li><li><a href="global.html#TFresnelRedShader">TFresnelRedShader</a></li><li><a href="global.html#toggleAutorun">toggleAutorun</a></li><li><a href="global.html#toggleCamera">toggleCamera</a></li><li><a href="global.html#up">up</a></li><li><a href="global.html#update">update</a></li><li><a href="global.html#updateAvatar">updateAvatar</a></li><li><a href="global.html#updateDataPanel">updateDataPanel</a></li><li><a href="global.html#updateDebugSize">updateDebugSize</a></li><li><a href="global.html#updateDocumentSize">updateDocumentSize</a></li><li><a href="global.html#updateHelperPosition">updateHelperPosition</a></li><li><a href="global.html#updateImageShot">updateImageShot</a></li><li><a href="global.html#updateInnerContainerSize">updateInnerContainerSize</a></li><li><a href="global.html#updateMainContainerSize">updateMainContainerSize</a></li><li><a href="global.html#updateMapViewer">updateMapViewer</a></li><li><a href="global.html#updateMapViewerDisplay">updateMapViewerDisplay</a></li><li><a href="global.html#updateMapViewerOrientation">updateMapViewerOrientation</a></li><li><a href="global.html#updateMapViewerPosition">updateMapViewerPosition</a></li><li><a href="global.html#updateMeasure">updateMeasure</a></li><li><a href="global.html#updateMeshResolution">updateMeshResolution</a></li><li><a href="global.html#updateNavbarSize">updateNavbarSize</a></li><li><a href="global.html#updatePointCloudDensity">updatePointCloudDensity</a></li><li><a href="global.html#updatePointClouds">updatePointClouds</a></li><li><a href="global.html#updatePointCloudSampling">updatePointCloudSampling</a></li><li><a href="global.html#updateRaycasting">updateRaycasting</a></li><li><a href="global.html#updateSizes">updateSizes</a></li><li><a href="global.html#updateTemporaryMeasure">updateTemporaryMeasure</a></li><li><a href="global.html#updateWindowSize">updateWindowSize</a></li><li><a href="global.html#warn">warn</a></li><li><a href="global.html#YearOffset">YearOffset</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">sources/cores/TViewport.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @author [Tristan Valcke]{@link https://github.com/Itee}
 * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause}
 *
 * @class TViewport
 * @classdesc The TViewport allow to manage in an easier way a webgl TViewport containing by default:&lt;br>
 * scene, camera, camera controllers, camera effects, lights, renderder, and some helper
 *
 * @requires three.PCFSoftShadowMap
 * @requires three.Scene
 * @requires three.PerspectiveCamera
 * @requires three.WebGLRenderer
 * @requires three.FogExp2
 * @requires three.DirectionalLight
 * @requires three.Raycaster
 * @requires three.Vector2
 * @requires three.Color
 * @requires three.MeshPhongMaterial
 * @requires three.ArrowHelper
 * @requires three.OrbitControls(modularized)
 * @requires three.AnaglyphEffect(modularized)
 * @requires three.StereoEffect(modularized)
 * @requires stats.Stats
 * @requires objects3d.TOrbitControlsHelper
 *
 * @example Todo
 *
 */

/* eslint-env browser */
/* global $ */

import { PCFSoftShadowMap } from '../../node_modules/threejs-full-es6/sources/constants'
import { EventDispatcher } from '../../node_modules/threejs-full-es6/sources/core/EventDispatcher'
import { MeshPhongMaterial } from '../../node_modules/threejs-full-es6/sources/materials/MeshPhongMaterial'
import { Color } from '../../node_modules/threejs-full-es6/sources/math/Color'
import { Vector2 } from '../../node_modules/threejs-full-es6/sources/math/Vector2'
import { OrbitControls } from '../../node_modules/threejs-full-es6/sources/controls/OrbitControls'
import { StereoEffect } from '../../node_modules/threejs-full-es6/sources/effects/StereoEffect'
import { AnaglyphEffect } from '../../node_modules/threejs-full-es6/sources/effects/AnaglyphEffect'
import { Scene } from '../../node_modules/threejs-full-es6/sources/scenes/Scene'
import { FogExp2 } from '../../node_modules/threejs-full-es6/sources/scenes/FogExp2'
import { PerspectiveCamera } from '../../node_modules/threejs-full-es6/sources/cameras/PerspectiveCamera'
import { WebGLRenderer } from '../../node_modules/threejs-full-es6/sources/renderers/WebGLRenderer'
import { DirectionalLight } from '../../node_modules/threejs-full-es6/sources/lights/DirectionalLight'
import { ArrowHelper } from '../../node_modules/threejs-full-es6/sources/helpers/ArrowHelper'
import { Raycaster } from '../../node_modules/threejs-full-es6/sources/core/Raycaster'

import Stats from 'stats.js'
import { DefaultLogger as TLogger } from '../loggers/TLogger'
import { TOrbitControlsHelper } from '../objects3d/TOrbitControlsHelper'

/**
 *
 * @param container
 * @constructor
 */
function TViewport ( container ) {

    // First check if the given container exist, else throw an error
    if ( container === null || typeof container === 'undefined' || container.length === 0 ) {
        throw new Error( 'Required an container or a template to be create !' )
    }

    this.container       = container
    this.containerWidth  = this.container.clientWidth //outerWidth(true)
    this.containerHeight = this.container.clientHeight //height()

    const template = TViewport.getTemplate()
    this.container.innerHTML += template
    this.view      = this.container.getElementsByClassName( 'webglViewport' )[ 0 ]

    this.scene = new Scene()

    this.camera                   = new PerspectiveCamera()
    this.orbitControl             = new OrbitControls( this.camera, this.container )
    this.orbitControl.maxDistance = 2000
    this.orbitControlHelper       = new TOrbitControlsHelper( this.orbitControl )
    this.scene.add( this.orbitControlHelper )

    this.cameraControl         = this.orbitControl
    this.cameraControlType     = 'orbital'
    this.cameraControl.enabled = true;

    this.cameraEffect = 'normal'

    // Base renderer
    this.webGLRenderer = new WebGLRenderer( { antialias: true } )

    // Anaglyph effect
    this.anaglyphEffectRenderer = new AnaglyphEffect( this.webGLRenderer, this.containerWidth, this.containerHeight )

    // Creates the Stereo Effect for the VR experience.
    this.stereoEffectRenderer = new StereoEffect( this.webGLRenderer )

    // Current renderer
    this.renderer = this.webGLRenderer;

    this.view.appendChild( this.webGLRenderer.domElement )
    //    $( this.webGLRenderer.domElement ).appendTo( this.view )

    this.measuring     = false
    this.mouse         = new Vector2()
    this.isRaycastable = false;
    this.raycaster     = new Raycaster()
    this.raycastables  = []
    this.intersection  = undefined

    //    this.baseColor       = new Color( 0.7, 0.5, 0.1 )
    //    this.intersectColor  = new Color( 0.1, 0.5, 0.7 )

    this.backupIntersectedMaterial = undefined
    this.backupSelectedMaterial    = undefined
    this.intersectMaterial         = new MeshPhongMaterial( { color: new Color( 0.1, 0.5, 0.7 ) } )

    this.selected = undefined
    //    this.selectedOutline = undefined

    this.settings = {
        camera:   {
            fov:      50,
            aspect:   (this.containerWidth / this.containerHeight),
            near:     0.1,
            far:      2000,
            position: {
                x: 5.0,
                y: 2.0,
                z: -5.0
            },
            target:   {
                x: 0.0,
                y: 0.0,
                z: 0.0
            }
        },
        showStat: true
    }

    //    this.clock = new Clock()

    //    this.view.appendTo( this.container )
    init.call( this )

    if ( this.settings.showStat ) {

        this.stats                           = new Stats()
        this.stats.domElement.style.position = 'absolute'
        this.stats.domElement.style.top      = null
        this.stats.domElement.style.left     = null
        this.stats.domElement.style.right    = '0px'
        this.stats.domElement.style.bottom   = '0px'
        this.container.appendChild( this.stats.domElement )

    }

    this.autorun   = true
    this.toggleCam = true
    this.updateSizes()
    this.update()

    function init () {

        initCamera.call( this )
        initLight.call( this )
        initRender.call( this )
        initEvent.call( this )

    }

    function initCamera () {

        this.camera.fov        = this.settings.camera.fov
        this.camera.aspect     = this.settings.camera.aspect
        this.camera.near       = this.settings.camera.near
        this.camera.far        = this.settings.camera.far
        this.camera.position.x = this.settings.camera.position.x
        this.camera.position.y = this.settings.camera.position.y
        this.camera.position.z = this.settings.camera.position.z

    }

    function initLight () {

        //        this.scene.add( new AmbientLight( 0xffffff ) );

        //        this.light = new SpotLight( 0x777777 )
        //        this.light.position.set( -700.0, 1800.0, 2000.0 )
        //        this.light.castShadow            = true
        //        this.light.shadow.mapSize.width  = 2048
        //        this.light.shadow.mapSize.height = 2048

        this.light = new DirectionalLight( 0xFFFFFF );
        this.light.position.set( -70.0, 180.0, 200.0 )
        this.light.castShadow            = true
        this.light.shadow.mapSize.width  = 2048
        this.light.shadow.mapSize.height = 2048

        //        var lightHelper = new DirectionalLightHelper( this.light, 200, new Color(0.3, 0.5, 0.7) )
        //        this.scene.add( lightHelper )

        this.scene.add( this.light )

        //        this.scene.add( this.light )

    }

    function initRender () {

        this.webGLRenderer.setClearColor( 0x222222 )
        this.webGLRenderer.autoClear         = true
        this.webGLRenderer.shadowMap.enabled = true
        this.webGLRenderer.shadowMap.yype    = PCFSoftShadowMap
    }

    function initEvent () {

        const self = this

        window.addEventListener( 'resize', self.updateSizes.bind( self ), true );

        self.view.addEventListener( 'mousemove', this.updateRaycasting.bind( this ), false )
        self.view.addEventListener( 'mousedown', this.selectObject.bind( this ), false )

        self.orbitControl.addEventListener( 'rotate', self.decimateVisibleMeshes.bind( self ), true )
        self.orbitControl.addEventListener( 'pan', self.decimateVisibleMeshes.bind( self ), true )
        self.orbitControl.addEventListener( 'zoom', self.decimateVisibleMeshes.bind( self ), true )
        self.orbitControl.addEventListener( 'end', self.populateVisibleMeshes.bind( self ), true )

    }

}

// Static methods
Object.assign( TViewport, {

    /**
     *
     * @return {string}
     */
    getTemplate () {
        return '' +
            '&lt;div class="webglViewport">' +
            '	&lt;div id="tablet-controls-panel">' +
            '       &lt;div id="progressBar" class="progress">' +
            '           &lt;div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">' +
            '               &lt;span class="sr-only">0%&lt;/span>' +
            '           &lt;/div>' +
            '       &lt;/div>' +
            //            '		&lt;div class="control">' +
            //            '			&lt;a id="move-forward" data-toggle="tooltip" title="Avancer">' +
            //            '				&lt;i class="fa fa-arrow-circle-up fa-4x">&lt;/i>' +
            //            '			&lt;/a>' +
            //            '		&lt;/div>' +
            //            '		&lt;div class="control">' +
            //            '			&lt;a id="move-backward" data-toggle="tooltip" title="Reculer">' +
            //            '				&lt;i class="fa fa-arrow-circle-down fa-4x">&lt;/i>' +
            //            '			&lt;/a>' +
            //            '		&lt;/div>' +
            '	&lt;/div>' +
            '	&lt;div id="camera-coordinates" style="color: white; position: absolute; top: 0px; margin-left: 10px;">&lt;/div>' +
            '&lt;/div>'
    }

} )

// Public methods
Object.assign( TViewport.prototype, EventDispatcher.prototype, {

    /**
     *
     */
    toggleAutorun () {

        // Toggle running state
        this.autorun = !this.autorun
        // Restart loop if wanted
        if ( this.autorun ) {
            this.update()
        }

    },

    /**
     *
     */
    toggleCamera () {

        this.toggleCam = !this.toggleCam
    },

    /**
     *
     * @param forceUpdate
     */
    update ( forceUpdate ) {

        if ( this.stats ) {
            this.stats.begin()
        }

        // Break loop if wanted
        if ( this.autorun || forceUpdate ) {

            requestAnimationFrame( this.update.bind( this ) )

            if ( this.cameraControl instanceof OrbitControls ) {
                this.camera.updateProjectionMatrix()
            }

            //            var avatar = this.scene.getObjectByName( 'Avatar' )
            //            if ( avatar &amp;&amp; avatar.mixer ) {
            //
            //                avatar.mixer.update( this.clock.getDelta() )
            //
            //            }

            this.renderer.render( this.scene, this.camera )

            //            if ( this.cameraEffect === 'normal' ) {
            //                this.webGLRenderer.render( this.scene, this.camera )
            //            } else if ( this.cameraEffect === 'anaglyph' ) {
            //                this.anaglyphEffectRenderer.render( this.scene, this.camera )
            //            } else if ( this.cameraEffect === 'vr' ) {
            //                this.stereoEffectRenderer.render( this.scene, this.camera )
            //            } else {
            //                TLogger.error( 'Unknown camera effect: ' + this.cameraEffect )
            //                this.webGLRenderer.render( this.scene, this.camera )
            //            }

        }

        if ( this.stats ) {
            this.stats.end()
        }

    },

    /**
     *
     */
    updateSizes () {

        this.containerWidth  = this.container.clientWidth
        this.containerHeight = this.container.clientHeight

        this.webGLRenderer.setSize( this.containerWidth, this.containerHeight )

        // required for correct camera position at init...
        this.camera.aspect = this.containerWidth / this.containerHeight;
        this.camera.updateProjectionMatrix();
    },

    /**
     *
     * @param objects
     */
    addRaycastables ( objects ) {

        for ( let intersectableIndex = 0, numberOfIntersectables = objects.length ; intersectableIndex &lt; numberOfIntersectables ; intersectableIndex++ ) {

            this.raycastables.push( objects[ intersectableIndex ] )

        }

    },

    /**
     *
     * @param event
     */
    updateRaycasting ( event ) {

        if ( !this.isRaycastable ) {

            if ( this.intersection ) {

                //                this.intersection.object.material.color.copy( this.baseColor )
                this.intersection          = null
                document.body.style.cursor = 'auto'

            }

            return

        }

        event.preventDefault()

        var xMouseOnContainer = event.layerX || event.offsetX || 0
        var yMouseOnContainer = event.layerY || event.offsetY || 0
        this.mouse.x          = ( xMouseOnContainer / this.container.clientWidth ) * 2 - 1
        this.mouse.y          = -( yMouseOnContainer / this.container.clientHeight ) * 2 + 1
        this.raycaster.setFromCamera( this.mouse, this.camera )

        var showRay = false
        if ( showRay ) {

            var ray = this.raycaster.ray

            if ( this.ray ) {
                this.scene.remove( this.ray )
            }

            this.ray = new ArrowHelper( ray.direction, ray.origin, 10, 0x115577 )
            this.scene.add( this.ray )

        }

        var intersections = undefined
        if ( this.measuring ) {

            let visibleRaycastable = []
            recursiveSearchForRaycastable( this.raycastables, visibleRaycastable )

            intersections = this.raycaster.intersectObjects( visibleRaycastable, true )
            if ( intersections.length > 0 ) {

                this.intersection = intersections[ 0 ] // Keep only closest intersected object
                this.dispatchEvent( { type: 'intersectPoint' } )

            } else if ( this.intersection ) {

                this.intersection = null

            }

        } else {

            let visibleRaycastable = []
            recursiveSearchForRaycastable( this.raycastables, visibleRaycastable )

            intersections = this.raycaster.intersectObjects( visibleRaycastable, true )
            if ( intersections.length > 0 ) {

                if ( !this.intersection ) {

                    this.intersection = intersections[ 0 ]

                    this.backupIntersectedMaterial    = this.intersection.object.material
                    this.intersection.object.material = this.intersectMaterial

                } else if ( this.intersection.object.uuid !== intersections[ 0 ].object.uuid ) {

                    this.intersection.object.material = this.backupIntersectedMaterial

                    this.intersection                 = intersections[ 0 ]
                    this.backupIntersectedMaterial    = this.intersection.object.material
                    this.intersection.object.material = this.intersectMaterial

                }

                document.body.style.cursor = 'pointer'

            } else if ( this.intersection ) {

                this.intersection.object.material = this.backupIntersectedMaterial
                this.intersection                 = null
                document.body.style.cursor        = 'auto'

            }

        }

        // Allow to raycast only visible meshes in the object tree
        function recursiveSearchForRaycastable ( objects, visibleRaycastable ) {

            for ( let raycastableIndex = 0, numberOfRaycastable = objects.length ; raycastableIndex &lt; numberOfRaycastable ; raycastableIndex++ ) {
                let raycastable = objects[ raycastableIndex ]

                if ( !raycastable.visible ) { continue }

                if ( raycastable.isMesh ) {

                    visibleRaycastable.push( raycastable )

                } else if ( raycastable.children.length > 0 ) {

                    recursiveSearchForRaycastable( raycastable.children, visibleRaycastable )

                }

            }

        }

    },

    /**
     *
     * @param clickEvent
     */
    selectObject ( clickEvent ) {

        if ( this.measuring ) {

            if ( this.intersection ) {

                if ( clickEvent.button === 0 ) {

                    this.dispatchEvent( { type: 'newClickedPoint' } )

                } else if ( clickEvent.button === 2 ) {

                    this.intersection = null
                    this.dispatchEvent( { type: 'measureEnd' } )

                } else {

                    this.intersection = null
                    this.dispatchEvent( { type: 'measureEnd' } )

                }

            } else {

                TLogger.warn( 'Unable to get hit position for undefined intersection objects !!!' )

            }

        } else {

            if ( clickEvent.button === 0 ) {

                if ( this.intersection ) {

                    clickEvent.preventDefault()

                    if ( this.selected !== this.intersection.object ) {

                        if ( this.selected ) {

                            this.selected.material      = this.backupSelectedMaterial
                            this.selected               = null
                            this.backupSelectedMaterial = null
                            //                            this.scene.remove( this.selectedOutline )

                        }

                        this.selected                  = this.intersection.object
                        this.backupSelectedMaterial    = this.backupIntersectedMaterial
                        this.backupIntersectedMaterial = this.intersectMaterial
                        //                        this.selected.material = this.intersectMaterial

                        //                        var selectedGeometry = this.selected.geometry
                        //
                        //                        var outlineMaterial = new MeshBasicMaterial( {
                        //                            color: 0x115577,
                        //                            side:  BackSide
                        //                        } )
                        //
                        //                        this.selectedOutline = new Mesh( selectedGeometry, outlineMaterial )
                        //                        //                    this.selectedOutline.matrix.copy( this.selected.matrix )
                        //                        this.selectedOutline.position.copy( this.selected.position )
                        //                        this.selectedOutline.quaternion.copy( this.selected.quaternion )
                        //                        this.selectedOutline.scale.set( 1.1, 1.0, 1.1 )
                        //
                        //                        this.scene.add( this.selectedOutline )

                        this.dispatchEvent( { type: 'objectSelected' } )

                    }

                } else if ( this.selected ) {

                    this.selected.material      = this.backupSelectedMaterial
                    this.selected               = null
                    this.backupSelectedMaterial = null

                    //                    this.scene.remove( this.selectedOutline )
                    //                    this.selected = null

                }

            }

        }

    },

    /**
     *
     * @param position
     */
    setCameraPosition ( position ) {

        const cameraControllerType = this.cameraControlType
        if ( cameraControllerType === 'orbital' ) {

            this.camera.position.x = position.x
            this.camera.position.y = position.y
            this.camera.position.z = position.z

            this.cameraControl.target.x = position.x
            this.cameraControl.target.y = 0
            this.cameraControl.target.z = position.z

            this.cameraControl.update()

        } else if ( cameraControllerType === 'path' ) {

            this.cameraControl.goTo( position )

        } else {

            TLogger.error( "Unable to change camera position, unknown camera controller type !" );

        }

    },

    /**
     *
     * @param cameraEffect
     */
    setCameraEffect ( cameraEffect ) {

        var trimmedEffectName = cameraEffect.trim( ' ' );

        // In case we were in vr, reset renderer size
        if ( this.cameraEffect === trimmedEffectName ) {

            return;

        } else if ( trimmedEffectName === 'normal' ) {

            this.renderer = this.webGLRenderer;

        } else if ( trimmedEffectName === 'vr' ) {

            this.renderer = this.stereoEffectRenderer;

        } else if ( trimmedEffectName === 'anaglyph' ) {

            this.renderer = this.anaglyphEffectRenderer;

        } else {

            this.renderer = this.webGLRenderer;

        }

        this.renderer.setSize( this.containerWidth, this.containerHeight )

        this.cameraEffect = trimmedEffectName

    },

    /**
     *
     * @param cameraControlType
     */
    setCameraControls ( cameraControlType ) {

        var currentCameraPosition = this.camera.position

        if ( cameraControlType === "orbital" ) {

            this.cameraControlType = cameraControlType

            this.cameraControl.enabled = false
            this.scene.fog             = null
            this.cameraControl         = this.orbitControl
            this.cameraControl.enabled = true

            this.camera.far = 60
            this.camera.updateProjectionMatrix()

            // Set target to previous camera position
            this.cameraControl.target.x = currentCameraPosition.x
            this.cameraControl.target.y = currentCameraPosition.y
            this.cameraControl.target.z = currentCameraPosition.z

            this.cameraControl.object.position.x += 10
            this.cameraControl.object.position.y += 5
            this.cameraControl.object.position.z += 10

            this.scene.add( this.orbitControlHelper )

            this.cameraControl.update()

        } else if ( cameraControlType === "avatar" ) {

            // Set target to previous camera position
            this.cameraControl.object.position.x = this.cameraControl.target.x
            this.cameraControl.object.position.y = this.cameraControl.target.y
            this.cameraControl.object.position.z = this.cameraControl.target.z

            this.cameraControl.target.x = currentCameraPosition.x
            this.cameraControl.target.y = currentCameraPosition.y
            this.cameraControl.target.z = currentCameraPosition.z

            this.scene.remove( this.orbitControlHelper )

            this.cameraControl.update()

        } else if ( cameraControlType === "path" ) {

            this.cameraControlType = cameraControlType

            this.cameraControl.enabled = false;
            this.scene.fog             = new FogExp2( 0x000000, 0.2 )
            this.camera.far            = 10
            this.camera.updateProjectionMatrix()

        } else {

            TLogger.error( `Invalid camera controller: ${cameraControlType}` )

        }

    },

    /**
     *
     * @param groupName
     * @param visibility
     */
    setGroupVisibility ( groupName, visibility ) {

        var group = this.scene.getObjectByName( groupName )
        if ( group ) {
            group.visible = visibility
            for ( var childIndex = 0, numberOfChilds = group.children.length ; childIndex &lt; numberOfChilds ; childIndex++ ) {
                group.children[ childIndex ].visible = visibility
            }
        }

    },

    /**
     *
     */
    decimateVisibleMeshes () {

        //todo: recursive search against currently visible group and cache hide mesh for repopulate later !!!

        const decimateValue = 0.9
        const groups        = this.scene.children.filter( child => child.type === 'Group' )
        if ( !groups || groups.length === 0 ) { return }

        const subGroup = groups[ 0 ].children.filter( child => child.type === 'Group' )
        if ( !subGroup || subGroup.length === 0 ) { return }

        const subSubGroup = subGroup[ 0 ].children.filter( child => child.type === 'Group' )
        if ( !subSubGroup || subSubGroup.length === 0 ) { return }

        const meshes = subSubGroup[ 0 ].children.filter( child => child.isMesh )
        if ( !meshes || meshes.length === 0 ) { return }

        const numberOfMeshesToHide = Math.round( meshes.length * decimateValue )

        for ( let meshIndex = 0 ; meshIndex &lt; numberOfMeshesToHide ; meshIndex++ ) {

            meshes[ meshIndex ].visible = false

        }

    },

    /**
     *
     */
    populateVisibleMeshes () {

        const groups = this.scene.children.filter( child => child.type === 'Group' )
        if ( !groups || groups.length === 0 ) { return }

        const subGroup = groups[ 0 ].children.filter( child => child.type === 'Group' )
        if ( !subGroup || subGroup.length === 0 ) { return }

        const subSubGroup = subGroup[ 0 ].children.filter( child => child.type === 'Group' )
        if ( !subSubGroup || subSubGroup.length === 0 ) { return }

        const meshes = subSubGroup[ 0 ].children.filter( child => child.isMesh )
        if ( !meshes || meshes.length === 0 ) { return }

        const numberOfMeshes = meshes.length

        for ( let meshIndex = 0 ; meshIndex &lt; numberOfMeshes ; meshIndex++ ) {

            meshes[ meshIndex ].visible = true

        }

    }

} )

export { TViewport }
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
