<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>sources/managers/database/TMaterialsManager.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="MeshManager.html">MeshManager</a></li><li><a href="TApplication.html">TApplication</a><ul class='methods'><li data-type='method'><a href="TApplication.html#.removeDiacritics">removeDiacritics</a></li><li data-type='method'><a href="TApplication.html#askUserForPosition">askUserForPosition</a></li><li data-type='method'><a href="TApplication.html#changeMaterialSide">changeMaterialSide</a></li><li data-type='method'><a href="TApplication.html#endMeasure">endMeasure</a></li><li data-type='method'><a href="TApplication.html#initRequest">initRequest</a></li><li data-type='method'><a href="TApplication.html#insertTreeViewItem">insertTreeViewItem</a></li><li data-type='method'><a href="TApplication.html#loadObjectFromURL">loadObjectFromURL</a></li><li data-type='method'><a href="TApplication.html#popupImageShotModal">popupImageShotModal</a></li><li data-type='method'><a href="TApplication.html#popupImportFilesModal">popupImportFilesModal</a></li><li data-type='method'><a href="TApplication.html#popupSelectedObjectModal">popupSelectedObjectModal</a></li><li data-type='method'><a href="TApplication.html#removeMeasure">removeMeasure</a></li><li data-type='method'><a href="TApplication.html#removeTemporaryMeasure">removeTemporaryMeasure</a></li><li data-type='method'><a href="TApplication.html#resetDataPanel">resetDataPanel</a></li><li data-type='method'><a href="TApplication.html#setCameraMode">setCameraMode</a></li><li data-type='method'><a href="TApplication.html#setLayerGroupVisibility">setLayerGroupVisibility</a></li><li data-type='method'><a href="TApplication.html#setMapViewer">setMapViewer</a></li><li data-type='method'><a href="TApplication.html#setRendersEffect">setRendersEffect</a></li><li data-type='method'><a href="TApplication.html#startMeasure">startMeasure</a></li><li data-type='method'><a href="TApplication.html#updateAvatar">updateAvatar</a></li><li data-type='method'><a href="TApplication.html#updateDataPanel">updateDataPanel</a></li><li data-type='method'><a href="TApplication.html#updateImageShot">updateImageShot</a></li><li data-type='method'><a href="TApplication.html#updateMapViewer">updateMapViewer</a></li><li data-type='method'><a href="TApplication.html#updateMapViewerOrientation">updateMapViewerOrientation</a></li><li data-type='method'><a href="TApplication.html#updateMapViewerPosition">updateMapViewerPosition</a></li><li data-type='method'><a href="TApplication.html#updateMeasure">updateMeasure</a></li><li data-type='method'><a href="TApplication.html#updateMeshResolution">updateMeshResolution</a></li><li data-type='method'><a href="TApplication.html#updatePointCloudDensity">updatePointCloudDensity</a></li><li data-type='method'><a href="TApplication.html#updateTemporaryMeasure">updateTemporaryMeasure</a></li><li data-type='method'><a href="TApplication.html#updateViewportSizes">updateViewportSizes</a></li></ul></li><li><a href="TCache.html">TCache</a><ul class='methods'><li data-type='method'><a href="TCache.html#add">add</a></li><li data-type='method'><a href="TCache.html#clear">clear</a></li><li data-type='method'><a href="TCache.html#get">get</a></li><li data-type='method'><a href="TCache.html#remove">remove</a></li></ul></li><li><a href="TDataBaseManager.html">TDataBaseManager</a><ul class='methods'><li data-type='method'><a href="TDataBaseManager.html#._statusOk">_statusOk</a></li><li data-type='method'><a href="TDataBaseManager.html#.requestServer">requestServer</a></li><li data-type='method'><a href="TDataBaseManager.html#_create">_create</a></li><li data-type='method'><a href="TDataBaseManager.html#_deleteOne">_deleteOne</a></li><li data-type='method'><a href="TDataBaseManager.html#_deleteSome">_deleteSome</a></li><li data-type='method'><a href="TDataBaseManager.html#_onArrayBuffer">_onArrayBuffer</a></li><li data-type='method'><a href="TDataBaseManager.html#_onBlob">_onBlob</a></li><li data-type='method'><a href="TDataBaseManager.html#_onError">_onError</a></li><li data-type='method'><a href="TDataBaseManager.html#_onJson">_onJson</a></li><li data-type='method'><a href="TDataBaseManager.html#_onLoad">_onLoad</a></li><li data-type='method'><a href="TDataBaseManager.html#_onProgress">_onProgress</a></li><li data-type='method'><a href="TDataBaseManager.html#_onText">_onText</a></li><li data-type='method'><a href="TDataBaseManager.html#_readOne">_readOne</a></li><li data-type='method'><a href="TDataBaseManager.html#_readSome">_readSome</a></li><li data-type='method'><a href="TDataBaseManager.html#_updateOne">_updateOne</a></li><li data-type='method'><a href="TDataBaseManager.html#_updateSome">_updateSome</a></li><li data-type='method'><a href="TDataBaseManager.html#create">create</a></li><li data-type='method'><a href="TDataBaseManager.html#delete">delete</a></li><li data-type='method'><a href="TDataBaseManager.html#read">read</a></li><li data-type='method'><a href="TDataBaseManager.html#update">update</a></li></ul></li><li><a href="TErrorManager.html">TErrorManager</a></li><li><a href="TFactory.html">TFactory</a></li><li><a href="TGeometriesManager.html">TGeometriesManager</a><ul class='methods'><li data-type='method'><a href="TGeometriesManager.html#convertJsonToGeometry">convertJsonToGeometry</a></li></ul></li><li><a href="TMaterialsManager.html">TMaterialsManager</a></li><li><a href="TObjectsManager.html">TObjectsManager</a></li><li><a href="TOrbitControlsHelper.html">TOrbitControlsHelper</a></li><li><a href="TOrchestrator.html">TOrchestrator</a><ul class='methods'><li data-type='method'><a href="TOrchestrator.html#processQueue">processQueue</a></li><li data-type='method'><a href="TOrchestrator.html#queue">queue</a></li></ul></li><li><a href="TPointsManager.html">TPointsManager</a></li><li><a href="TProgressManager.html">TProgressManager</a></li><li><a href="TScenesManager.html">TScenesManager</a></li><li><a href="TUniversalLoader.html">TUniversalLoader</a></li><li><a href="TViewport.html">TViewport</a></li></ul><h3>Modules</h3><ul><li><a href="module-config_babelConfiguration.html">config/babelConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_babelConfiguration.html#~CreateBabelConfiguration">CreateBabelConfiguration</a></li></ul></li><li><a href="module-config_eslintConfiguration.html">config/eslintConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_eslintConfiguration.html#~CreateEslintConfiguration">CreateEslintConfiguration</a></li></ul></li><li><a href="module-config_jsdocConfiguration.html">config/jsdocConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_jsdocConfiguration.html#~CreateJsdocConfiguration">CreateJsdocConfiguration</a></li></ul></li><li><a href="module-config_karmaBenchConfiguration.html">config/karmaBenchConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_karmaBenchConfiguration.html#~CreateKarmaBenchmarkConfiguration">CreateKarmaBenchmarkConfiguration</a></li></ul></li><li><a href="module-config_karmaUnitConfiguration.html">config/karmaUnitConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_karmaUnitConfiguration.html#~CreateKarmaUnitTestingConfiguration">CreateKarmaUnitTestingConfiguration</a></li></ul></li><li><a href="module-config_rollupConfiguration.html">config/rollupConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_rollupConfiguration.html#~CreateRollupConfiguration">CreateRollupConfiguration</a></li></ul></li><li><a href="module-gulpfile.html">gulpfile</a><ul class='methods'><li data-type='method'><a href="module-gulpfile.html#~gulp_convert-anaglyph-effect-to-es6-module">gulp _convert-anaglyph-effect-to-es6-module</a></li><li data-type='method'><a href="module-gulpfile.html#~gulp_convert-detector-to-es6-module">gulp _convert-detector-to-es6-module</a></li><li data-type='method'><a href="module-gulpfile.html#~gulp_convert-orbit-controls-to-es6-module">gulp _convert-orbit-controls-to-es6-module</a></li><li data-type='method'><a href="module-gulpfile.html#~gulp_convert-stereo-effect-to-es6-module">gulp _convert-stereo-effect-to-es6-module</a></li><li data-type='method'><a href="module-gulpfile.html#~gulp_extendThree">gulp _extendThree</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunbench">npm run bench</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunbuild">npm run build</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunclean">npm run clean</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrundoc">npm run doc</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunlint">npm run lint</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunrelease">npm run release</a></li><li data-type='method'><a href="module-gulpfile.html#~npmruntest">npm run test</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrununit">npm run unit</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunhelpdefault">npm run help </a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#addPointsFromBuffer">addPointsFromBuffer</a></li><li><a href="global.html#endianness">endianness</a></li><li><a href="global.html#getPointClouds">getPointClouds</a></li><li><a href="global.html#getSamplingForDistanceToCamera">getSamplingForDistanceToCamera</a></li><li><a href="global.html#HttpStatusCode">HttpStatusCode</a></li><li><a href="global.html#HttpVerb">HttpVerb</a></li><li><a href="global.html#ResponseType">ResponseType</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">sources/managers/database/TMaterialsManager.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @author [Tristan Valcke]{@link https://github.com/Itee}
 * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause}
 *
 * @class TScenesManager
 * @classdesc Todo...
 * @example Todo...
 * @requires TDataBaseManager
 *
 */

import { TDataBaseManager } from '../TDataBaseManager'
import {
    Color,
    MeshPhongMaterial,
    LineBasicMaterial
} from 'three'

/**
 *
 * @constructor
 */
function TMaterialsManager () {

    TDataBaseManager.call( this )
    this.basePath = '/materials'

}

TMaterialsManager.prototype = Object.assign( Object.create( TDataBaseManager.prototype ), {

    constructor: TMaterialsManager,

    convertJsonToMaterial ( jsonMaterial ) {

        const materialType = jsonMaterial.type
        let material       = undefined

        switch ( materialType ) {

            case 'MeshPhongMaterial': {
                material                     = new MeshPhongMaterial()
                material.uuid                = jsonMaterial.uuid
                material.name                = jsonMaterial.name
                material.type                = jsonMaterial.type
                material.fog                 = jsonMaterial.fog
                material.lights              = jsonMaterial.lights
                material.blending            = jsonMaterial.blending
                material.side                = jsonMaterial.side
                material.flatShading         = jsonMaterial.flatShading
                material.vertexColors        = jsonMaterial.vertexColors
                material.opacity             = jsonMaterial.opacity
                material.transparent         = jsonMaterial.transparent
                material.blendSrc            = jsonMaterial.blendSrc
                material.blendDst            = jsonMaterial.blendDst
                material.blendEquation       = jsonMaterial.blendEquation
                material.blendSrcAlpha       = jsonMaterial.blendSrcAlpha
                material.blendDstAlpha       = jsonMaterial.blendDstAlpha
                material.blendEquationAlpha  = jsonMaterial.blendEquationAlpha
                material.depthFunc           = jsonMaterial.depthFunc
                material.depthTest           = jsonMaterial.depthTest
                material.depthWrite          = jsonMaterial.depthWrite
                material.clippingPlanes      = jsonMaterial.clippingPlanes
                material.clipIntersection    = jsonMaterial.clipIntersection
                material.clipShadows         = jsonMaterial.clipShadows
                material.colorWrite          = jsonMaterial.colorWrite
                material.precision           = jsonMaterial.precision
                material.polygonOffset       = jsonMaterial.polygonOffset
                material.polygonOffsetFactor = jsonMaterial.polygonOffsetFactor
                material.polygonOffsetUnits  = jsonMaterial.polygonOffsetUnits
                material.dithering           = jsonMaterial.dithering
                material.alphaTest           = jsonMaterial.alphaTest
                material.premultipliedAlpha  = jsonMaterial.premultipliedAlpha
                material.overdraw            = jsonMaterial.overdraw
                material.visible             = jsonMaterial.visible
                material.userData            = jsonMaterial.userData
                material.needsUpdate         = jsonMaterial.needsUpdate
                material.color               = new Color( jsonMaterial.color.r, jsonMaterial.color.g, jsonMaterial.color.b )
                material.specular            = new Color( jsonMaterial.specular.r, jsonMaterial.specular.g, jsonMaterial.specular.b )
                material.shininess           = jsonMaterial.shininess
                material.map                 = jsonMaterial.map
                material.lightMap            = jsonMaterial.lightMap
                material.lightMapIntensity   = jsonMaterial.lightMapIntensity
                material.aoMap               = jsonMaterial.aoMap
                material.aoMapIntensity      = jsonMaterial.aoMapIntensity
                material.emissive            = new Color( jsonMaterial.emissive.r, jsonMaterial.emissive.g, jsonMaterial.emissive.b )
                material.emissiveIntensity   = jsonMaterial.emissiveIntensity
                material.emissiveMap         = jsonMaterial.emissiveMap
                material.bumpMap             = jsonMaterial.bumpMap
                material.bumpScale           = jsonMaterial.bumpScale
                material.normalMap           = jsonMaterial.normalMap
                material.normalScale         = jsonMaterial.normalScale
                material.displacementMap     = jsonMaterial.displacementMap
                material.displacementScale   = jsonMaterial.displacementScale
                material.displacementBias    = jsonMaterial.displacementBias
                material.specularMap         = jsonMaterial.specularMap
                material.alphaMap            = jsonMaterial.alphaMap
                material.envMap              = jsonMaterial.alphaMap
                material.combine             = jsonMaterial.combine
                material.reflectivity        = jsonMaterial.reflectivity
                material.refractionRatio     = jsonMaterial.refractionRatio
                material.wireframe           = jsonMaterial.wireframe
                material.wireframeLinewidth  = jsonMaterial.wireframeLinewidth
                material.wireframeLinecap    = jsonMaterial.wireframeLinecap
                material.wireframeLinejoin   = jsonMaterial.wireframeLinejoin
                material.skinning            = jsonMaterial.skinning
                material.morphTargets        = jsonMaterial.morphTargets
                material.morphNormals        = jsonMaterial.morphNormals
            }
                break;

            case 'LineBasicMaterial': {
                material       = new LineBasicMaterial();
                material.uuid  = jsonMaterial.uuid
                material.name  = jsonMaterial.name
                material.type  = jsonMaterial.type
                material.color = new Color( jsonMaterial.color.r, jsonMaterial.color.g, jsonMaterial.color.b )
            }
                break;

            default:
                console.error( 'Unknown material type !' );
                break;

        }

        return material

    }

} )

Object.defineProperties( TMaterialsManager.prototype, {

    _onJson: {
        value: function _onJson ( jsonData, onSuccess, onProgress, onError ) {

            let materials = {}

            if ( Array.isArray( jsonData ) ) {

                let data     = undefined
                let material = undefined
                for ( let dataIndex = 0, numberOfDatas = jsonData.length ; dataIndex &lt; numberOfDatas ; dataIndex++ ) {

                    data     = jsonData[ dataIndex ]
                    material = this.convertJsonToMaterial( data, onError )

                    if ( material ) { materials[ data._id ] = material }

                    onProgress( dataIndex / numberOfDatas )

                }

            } else {

                materials[ jsonData._id ] = this.convertJsonToMaterial( jsonData, onError )
                onProgress( 1.0 )

            }

            onSuccess( materials )

        }
    }

} )

export { TMaterialsManager }
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
