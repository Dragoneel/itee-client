<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>gulpfile.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="MeshManager.html">MeshManager</a></li><li><a href="TApplication.html">TApplication</a><ul class='methods'><li data-type='method'><a href="TApplication.html#.removeDiacritics">removeDiacritics</a></li><li data-type='method'><a href="TApplication.html#askUserForPosition">askUserForPosition</a></li><li data-type='method'><a href="TApplication.html#changeMaterialSide">changeMaterialSide</a></li><li data-type='method'><a href="TApplication.html#endMeasure">endMeasure</a></li><li data-type='method'><a href="TApplication.html#initRequest">initRequest</a></li><li data-type='method'><a href="TApplication.html#insertTreeViewItem">insertTreeViewItem</a></li><li data-type='method'><a href="TApplication.html#loadObjectFromURL">loadObjectFromURL</a></li><li data-type='method'><a href="TApplication.html#popupImageShotModal">popupImageShotModal</a></li><li data-type='method'><a href="TApplication.html#popupImportFilesModal">popupImportFilesModal</a></li><li data-type='method'><a href="TApplication.html#popupSelectedObjectModal">popupSelectedObjectModal</a></li><li data-type='method'><a href="TApplication.html#removeMeasure">removeMeasure</a></li><li data-type='method'><a href="TApplication.html#removeTemporaryMeasure">removeTemporaryMeasure</a></li><li data-type='method'><a href="TApplication.html#resetDataPanel">resetDataPanel</a></li><li data-type='method'><a href="TApplication.html#setCameraMode">setCameraMode</a></li><li data-type='method'><a href="TApplication.html#setLayerGroupVisibility">setLayerGroupVisibility</a></li><li data-type='method'><a href="TApplication.html#setMapViewer">setMapViewer</a></li><li data-type='method'><a href="TApplication.html#setRendersEffect">setRendersEffect</a></li><li data-type='method'><a href="TApplication.html#startMeasure">startMeasure</a></li><li data-type='method'><a href="TApplication.html#updateAvatar">updateAvatar</a></li><li data-type='method'><a href="TApplication.html#updateDataPanel">updateDataPanel</a></li><li data-type='method'><a href="TApplication.html#updateImageShot">updateImageShot</a></li><li data-type='method'><a href="TApplication.html#updateMapViewer">updateMapViewer</a></li><li data-type='method'><a href="TApplication.html#updateMapViewerOrientation">updateMapViewerOrientation</a></li><li data-type='method'><a href="TApplication.html#updateMapViewerPosition">updateMapViewerPosition</a></li><li data-type='method'><a href="TApplication.html#updateMeasure">updateMeasure</a></li><li data-type='method'><a href="TApplication.html#updateMeshResolution">updateMeshResolution</a></li><li data-type='method'><a href="TApplication.html#updatePointCloudDensity">updatePointCloudDensity</a></li><li data-type='method'><a href="TApplication.html#updateTemporaryMeasure">updateTemporaryMeasure</a></li><li data-type='method'><a href="TApplication.html#updateViewportSizes">updateViewportSizes</a></li></ul></li><li><a href="TCache.html">TCache</a><ul class='methods'><li data-type='method'><a href="TCache.html#add">add</a></li><li data-type='method'><a href="TCache.html#clear">clear</a></li><li data-type='method'><a href="TCache.html#get">get</a></li><li data-type='method'><a href="TCache.html#remove">remove</a></li></ul></li><li><a href="TDataBaseManager.html">TDataBaseManager</a><ul class='methods'><li data-type='method'><a href="TDataBaseManager.html#._statusOk">_statusOk</a></li><li data-type='method'><a href="TDataBaseManager.html#.requestServer">requestServer</a></li><li data-type='method'><a href="TDataBaseManager.html#_create">_create</a></li><li data-type='method'><a href="TDataBaseManager.html#_deleteOne">_deleteOne</a></li><li data-type='method'><a href="TDataBaseManager.html#_deleteSome">_deleteSome</a></li><li data-type='method'><a href="TDataBaseManager.html#_onArrayBuffer">_onArrayBuffer</a></li><li data-type='method'><a href="TDataBaseManager.html#_onBlob">_onBlob</a></li><li data-type='method'><a href="TDataBaseManager.html#_onError">_onError</a></li><li data-type='method'><a href="TDataBaseManager.html#_onJson">_onJson</a></li><li data-type='method'><a href="TDataBaseManager.html#_onLoad">_onLoad</a></li><li data-type='method'><a href="TDataBaseManager.html#_onProgress">_onProgress</a></li><li data-type='method'><a href="TDataBaseManager.html#_onText">_onText</a></li><li data-type='method'><a href="TDataBaseManager.html#_readOne">_readOne</a></li><li data-type='method'><a href="TDataBaseManager.html#_readSome">_readSome</a></li><li data-type='method'><a href="TDataBaseManager.html#_updateOne">_updateOne</a></li><li data-type='method'><a href="TDataBaseManager.html#_updateSome">_updateSome</a></li><li data-type='method'><a href="TDataBaseManager.html#create">create</a></li><li data-type='method'><a href="TDataBaseManager.html#delete">delete</a></li><li data-type='method'><a href="TDataBaseManager.html#read">read</a></li><li data-type='method'><a href="TDataBaseManager.html#update">update</a></li></ul></li><li><a href="TErrorManager.html">TErrorManager</a></li><li><a href="TFactory.html">TFactory</a></li><li><a href="TGeometriesManager.html">TGeometriesManager</a><ul class='methods'><li data-type='method'><a href="TGeometriesManager.html#convertJsonToGeometry">convertJsonToGeometry</a></li></ul></li><li><a href="TMaterialsManager.html">TMaterialsManager</a></li><li><a href="TObjectsManager.html">TObjectsManager</a></li><li><a href="TOrbitControlsHelper.html">TOrbitControlsHelper</a></li><li><a href="TOrchestrator.html">TOrchestrator</a><ul class='methods'><li data-type='method'><a href="TOrchestrator.html#processQueue">processQueue</a></li><li data-type='method'><a href="TOrchestrator.html#queue">queue</a></li></ul></li><li><a href="TPointsManager.html">TPointsManager</a></li><li><a href="TProgressManager.html">TProgressManager</a></li><li><a href="TScenesManager.html">TScenesManager</a></li><li><a href="TUniversalLoader.html">TUniversalLoader</a></li><li><a href="TViewport.html">TViewport</a></li></ul><h3>Modules</h3><ul><li><a href="module-config_babelConfiguration.html">config/babelConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_babelConfiguration.html#~CreateBabelConfiguration">CreateBabelConfiguration</a></li></ul></li><li><a href="module-config_eslintConfiguration.html">config/eslintConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_eslintConfiguration.html#~CreateEslintConfiguration">CreateEslintConfiguration</a></li></ul></li><li><a href="module-config_jsdocConfiguration.html">config/jsdocConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_jsdocConfiguration.html#~CreateJsdocConfiguration">CreateJsdocConfiguration</a></li></ul></li><li><a href="module-config_karmaBenchConfiguration.html">config/karmaBenchConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_karmaBenchConfiguration.html#~CreateKarmaBenchmarkConfiguration">CreateKarmaBenchmarkConfiguration</a></li></ul></li><li><a href="module-config_karmaUnitConfiguration.html">config/karmaUnitConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_karmaUnitConfiguration.html#~CreateKarmaUnitTestingConfiguration">CreateKarmaUnitTestingConfiguration</a></li></ul></li><li><a href="module-config_rollupConfiguration.html">config/rollupConfiguration</a><ul class='methods'><li data-type='method'><a href="module-config_rollupConfiguration.html#~CreateRollupConfiguration">CreateRollupConfiguration</a></li></ul></li><li><a href="module-gulpfile.html">gulpfile</a><ul class='methods'><li data-type='method'><a href="module-gulpfile.html#~gulp_convert-anaglyph-effect-to-es6-module">gulp _convert-anaglyph-effect-to-es6-module</a></li><li data-type='method'><a href="module-gulpfile.html#~gulp_convert-detector-to-es6-module">gulp _convert-detector-to-es6-module</a></li><li data-type='method'><a href="module-gulpfile.html#~gulp_convert-orbit-controls-to-es6-module">gulp _convert-orbit-controls-to-es6-module</a></li><li data-type='method'><a href="module-gulpfile.html#~gulp_convert-stereo-effect-to-es6-module">gulp _convert-stereo-effect-to-es6-module</a></li><li data-type='method'><a href="module-gulpfile.html#~gulp_extendThree">gulp _extendThree</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunbench">npm run bench</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunbuild">npm run build</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunclean">npm run clean</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrundoc">npm run doc</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunlint">npm run lint</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunrelease">npm run release</a></li><li data-type='method'><a href="module-gulpfile.html#~npmruntest">npm run test</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrununit">npm run unit</a></li><li data-type='method'><a href="module-gulpfile.html#~npmrunhelpdefault">npm run help </a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#addPointsFromBuffer">addPointsFromBuffer</a></li><li><a href="global.html#endianness">endianness</a></li><li><a href="global.html#getPointClouds">getPointClouds</a></li><li><a href="global.html#getSamplingForDistanceToCamera">getSamplingForDistanceToCamera</a></li><li><a href="global.html#HttpStatusCode">HttpStatusCode</a></li><li><a href="global.html#HttpVerb">HttpVerb</a></li><li><a href="global.html#ResponseType">ResponseType</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">gulpfile.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @author [Tristan Valcke]{@link https://github.com/Itee}
 * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause}
 *
 * @module gulpfile
 *
 * @description The gulp tasks file. It allow to run some tasks from command line interface.&lt;br>
 * The available tasks are:
 * &lt;ul>
 * &lt;li>help&lt;/li>
 * &lt;li>clean&lt;/li>
 * &lt;li>lint&lt;/li>
 * &lt;li>doc&lt;/li>
 * &lt;li>test&lt;/li>
 * &lt;li>build&lt;/li>
 * &lt;li>release&lt;/li>
 * &lt;/ul>
 * You could find a complet explanation about these tasks using: &lt;b>npm run help&lt;/b>.
 *
 * @requires {@link module: [gulp]{@link https://github.com/gulpjs/gulp}}
 * @requires {@link module: [gulp-util]{@link https://github.com/gulpjs/gulp-util}}
 * @requires {@link module: [gulp-jsdoc3]{@link https://github.com/mlucool/gulp-jsdoc3}}
 * @requires {@link module: [gulp-eslint]{@link https://github.com/adametry/gulp-eslint}}
 * @requires {@link module: [gulp-inject-string]{@link https://github.com/mikehazell/gulp-inject-string}}
 * @requires {@link module: [gulp-replace]{@link https://github.com/lazd/gulp-replace}}
 * @requires {@link module: [del]{@link https://github.com/sindresorhus/del}}
 * @requires {@link module: [run-sequence]{@link https://github.com/OverZealous/run-sequence}}
 * @requires {@link module: [rollup]{@link https://github.com/rollup/rollup}}
 */

/* eslint-env node */

const gulp        = require( 'gulp' )
const util        = require( 'gulp-util' )
const jsdoc       = require( 'gulp-jsdoc3' )
const eslint      = require( 'gulp-eslint' )
const inject      = require( 'gulp-inject-string' )
const replace     = require( 'gulp-replace' )
const del         = require( 'del' )
const runSequence = require( 'run-sequence' )
const rollup      = require( 'rollup' )

const log     = util.log
const colors  = util.colors
const red     = colors.red
const green   = colors.green
const blue    = colors.blue
const cyan    = colors.cyan
const yellow  = colors.yellow
const magenta = colors.magenta

/**
 * @method npm run help ( default )
 * @description Will display the help in console
 */
gulp.task( 'default', [ 'help' ] )
gulp.task( 'help', ( done ) => {

    log( '====================================================' )
    log( '|                                                  |' )
    log( '|                Itee Client - HELP                |' )
    log( '|                                                  |' )
    log( '====================================================' )
    log( '' )
    log( 'Available commands are:' )
    log( blue( 'npm run' ), cyan( 'help' ), ' - Display this help.' )
    log( blue( 'npm run' ), cyan( 'patch' ), ' - Will patch three package to fix some invalid state.', red( '( Must be run only once after installing three package !!! )' ) )
    log( blue( 'npm run' ), cyan( 'clean' ), ' - Will delete builds and temporary folders.' )
    log( blue( 'npm run' ), cyan( 'lint' ), ' - Will run the eslint in pedantic mode with auto fix when possible.' )
    log( blue( 'npm run' ), cyan( 'doc' ), ' - Will run jsdoc, and create documentation under `documentation` folder, using the docdash theme' )
    log( blue( 'npm run' ), cyan( 'test' ), ' - Will run the test framworks (unit and bench), and create reports under `test/report` folder, using the mochawesome theme' )
    log( blue( 'npm run' ), cyan( 'unit' ), ' - Will run the karma server for unit tests.', red( '( /!\\ Deprecated: will be remove as soon as test script is fixed !!! )' ) )
    log( blue( 'npm run' ), cyan( 'bench' ), ' - Will run the karma server for benchmarks.', red( '( /!\\ Deprecated: will be remove as soon as test script is fixed !!! )' ) )
    log( blue( 'npm run' ), cyan( 'build' ), yellow( '--' ), green( '&lt;options>' ), ' - Will build the application for development and/or production environments.', yellow( 'Note: The two dash are only required if you provide options !' ) )
    log( '  The available options are:' )
    log( '      ', green( '-d' ), 'or', green( '--dev' ), ' - to build in development environment' )
    log( '      ', green( '-p' ), 'or', green( '--prod' ), ' - to build in production environment' )
    log( '       (in case no environment is provide both will be compile)' )
    log( '' )
    log( '      ', green( '-f:' ), magenta( '&lt;format>' ), 'or', green( '--format:' ), magenta( '&lt;format>' ), ' - to specify the output build type.' )
    log( '       where format could be any of:', magenta( 'amd' ), magenta( 'cjs' ), magenta( 'es' ), magenta( 'iife' ), magenta( 'umd' ) )
    log( '' )
    log( '      ', green( '-s' ), 'or', green( '--sourcemap' ), ' - to build with related source map' )
    log( '' )
    log( blue( 'npm run' ), cyan( 'release' ), ' - Will run all the lint, test stuff, and if succeed will build the application in both environments.' )
    log( '' )
    log( 'In case you have', blue( 'gulp' ), 'installed globally, you could use also:' )
    log( blue( 'gulp' ), cyan( 'command' ), ' - It will perform the command like using "npm run" but with less characters to type... Because you\'re a developer, right ?' )

    done()

} )

/**
 * @method npm run clean
 * @description Will delete builds and temporary folders
 */
gulp.task( 'clean', () => {

    return del( [
        './builds'
    ] )

} )

/**
 * @method npm run lint
 * @description Will lint the sources files and try to fix the style when possible
 */
gulp.task( 'lint', () => {

    // Todo: split between source and test with differents env

    return gulp.src( [ 'gulpfile.js', 'configs/**/*.js', 'scripts/**/*.js', 'sources/**/*', 'tests/**/*.js' ] )
               .pipe( eslint( {
                   allowInlineConfig: true,
                   globals:           [],
                   fix:               true,
                   quiet:             false,
                   envs:              [],
                   configFile:        './configs/eslint.conf.json',
                   parser:            'babel-eslint',
                   parserOptions:     {
                       ecmaFeatures: {
                           jsx: true
                       }
                   },
                   plugins:           [
                       'react'
                   ],
                   rules:             {
                       "react/jsx-uses-react": "error",
                       "react/jsx-uses-vars":  "error"
                   },
                   useEslintrc:       false
               } ) )
               .pipe( eslint.format( 'stylish' ) )
               .pipe( eslint.failAfterError() )

    // OR

    //    return gulp.src([ 'gulpfile.js', 'configs/**/*.js', 'scripts/**/*.js', 'sources/**/*.js', 'tests/**/*.js' ])
    //               .pipe(standard({
    //                   fix:     true,   // automatically fix problems
    //                   globals: [],  // custom global variables to declare
    //                   plugins: [],  // custom eslint plugins
    //                   envs:    [],     // custom eslint environment
    //                   parser:  'babel-eslint'    // custom js parser (e.g. babel-eslint)
    //               }))
    //               .pipe(standard.reporter('default', {
    //                   breakOnError:   true,
    //                   breakOnWarning: true,
    //                   quiet:          true,
    //                   showRuleNames:  true,
    //                   showFilePath:   true
    //               }))
    //               .pipe(gulp.dest((file) => {
    //                   return file.base
    //               }))

} )

/**
 * @method npm run doc
 * @description Will generate this documentation
 */
gulp.task( 'doc', () => {

    const config = require( './configs/jsdoc.conf' )

    return gulp.src( [ '' ], { read: false } )
               .pipe( jsdoc( config ) )

} )

/**
 * @method npm run test
 * @description Will run unit tests and benchmarks using karma
 */
gulp.task( 'test', ( done ) => {

    runSequence(
        'unit',
        'bench',
        done
    )

} )

/**
 * @method npm run unit
 * @description Will run unit tests using karma
 */
gulp.task( 'unit', () => {

} )

/**
 * @method npm run bench
 * @description Will run benchmarks using karma
 */
gulp.task( 'bench', () => {

} )

/**
 * @private
 * @method gulp _convert-orbit-controls-to-es6-module
 * @description Will convert/patch the orbit controls from three, and output the result under `builds/tmp`. This dependency is required in some Itee client modules.
 */
gulp.task( '_convert-orbit-controls-to-es6-module', () => {

    return gulp.src( './node_modules/three/examples/js/controls/OrbitControls.js' )
               .pipe( inject.prepend( "import {OrthographicCamera} from '../../node_modules/three/src/cameras/OrthographicCamera'\n" ) )
               .pipe( inject.prepend( "import {PerspectiveCamera} from '../../node_modules/three/src/cameras/PerspectiveCamera'\n" ) )
               .pipe( inject.prepend( "import {EventDispatcher} from '../../node_modules/three/src/core/EventDispatcher'\n" ) )
               .pipe( inject.prepend( "import {Quaternion} from '../../node_modules/three/src/math/Quaternion'\n" ) )
               .pipe( inject.prepend( "import {Spherical} from '../../node_modules/three/src/math/Spherical'\n" ) )
               .pipe( inject.prepend( "import {Vector3} from '../../node_modules/three/src/math/Vector3'\n" ) )
               .pipe( inject.prepend( "import {Vector2} from '../../node_modules/three/src/math/Vector2'\n" ) )
               .pipe( inject.prepend( "import {MOUSE} from '../../node_modules/three/src/constants'\n" ) )
               .pipe( replace( /THREE.(\w*) = function/g, 'var $1 = function' ) )
               .pipe( replace( 'THREE.', '' ) )
               .pipe( replace( 'rotateStart.copy( rotateEnd );', 'rotateStart.copy( rotateEnd );\n//[TV - PATCH - 28/11/2016] Emit rotate event\nscope.dispatchEvent( { type: \'rotate\' } );' ) )
               .pipe( replace( 'dollyStart.copy( dollyEnd );', 'dollyStart.copy( dollyEnd );\n//[TV - PATCH - 28/11/2016] Emit zoom event\nscope.dispatchEvent( { type: \'zoom\' } );' ) )
               .pipe( replace( 'panStart.copy( panEnd );', 'panStart.copy( panEnd );\n//[TV - PATCH - 28/11/2016] Emit pan event\nscope.dispatchEvent( { type: \'pan\' } );' ) )
               .pipe( inject.append( '\nexport {OrbitControls}\n' ) )
               .pipe( gulp.dest( './builds/tmp/' ) )

} )

/**
 * @private
 * @method gulp _convert-anaglyph-effect-to-es6-module
 * @description Will convert/patch the anaglyph effect from three, and output the result under `builds/tmp`. This dependency is required in some Itee client modules.
 */
gulp.task( '_convert-anaglyph-effect-to-es6-module', () => {

    return gulp.src( './node_modules/three/examples/js/effects/AnaglyphEffect.js' )
               .pipe( inject.prepend( "import {Matrix3} from '../../node_modules/three/src/math/Matrix3'\n" ) )
               .pipe( inject.prepend( "import {OrthographicCamera} from '../../node_modules/three/src/cameras/OrthographicCamera'\n" ) )
               .pipe( inject.prepend( "import {StereoCamera} from '../../node_modules/three/src/cameras/StereoCamera'\n" ) )
               .pipe( inject.prepend( "import {Scene} from '../../node_modules/three/src/scenes/Scene'\n" ) )
               .pipe( inject.prepend( "import {LinearFilter} from '../../node_modules/three/src/constants'\n" ) )
               .pipe( inject.prepend( "import {NearestFilter} from '../../node_modules/three/src/constants'\n" ) )
               .pipe( inject.prepend( "import {RGBAFormat} from '../../node_modules/three/src/constants'\n" ) )
               .pipe( inject.prepend( "import {WebGLRenderTarget} from '../../node_modules/three/src/renderers/WebGLRenderTarget'\n" ) )
               .pipe( inject.prepend( "import {ShaderMaterial} from '../../node_modules/three/src/materials/ShaderMaterial'\n" ) )
               .pipe( inject.prepend( "import {Mesh} from '../../node_modules/three/src/objects/Mesh'\n" ) )
               .pipe( inject.prepend( "import {PlaneBufferGeometry} from '../../node_modules/three/src/geometries/PlaneGeometry'\n" ) )
               .pipe( replace( /THREE.(\w*) = function/g, 'var $1 = function' ) )
               .pipe( replace( 'THREE.', '' ) )
               .pipe( inject.append( '\nexport {AnaglyphEffect}\n' ) )
               .pipe( gulp.dest( './builds/tmp/' ) )

} )

/**
 * @private
 * @method gulp _convert-stereo-effect-to-es6-module
 * @description Will convert/patch the stereo effect from three, and output the result under `builds/tmp`. This dependency is required in some Itee client modules.
 */
gulp.task( '_convert-stereo-effect-to-es6-module', () => {

    return gulp.src( './node_modules/three/examples/js/effects/StereoEffect.js' )
               .pipe( inject.prepend( "import {StereoCamera} from '../../node_modules/three/src/cameras/StereoCamera'\n" ) )
               .pipe( replace( /THREE.(\w*) = function/g, 'var $1 = function' ) )
               .pipe( replace( 'THREE.', '' ) )
               .pipe( inject.append( '\nexport {StereoEffect}\n' ) )
               .pipe( gulp.dest( './builds/tmp/' ) )

} )

/**
 * @private
 * @method gulp _convert-detector-to-es6-module
 * @description Will convert/patch the webgl detector from three, and output the result under `builds/tmp`. This dependency is required in some Itee client modules.
 */
gulp.task( '_convert-detector-to-es6-module', () => {

    return gulp.src( './node_modules/three/examples/js/Detector.js' )
               .pipe( inject.append( '\nexport {Detector}\n' ) )
               .pipe( gulp.dest( './builds/tmp/' ) )

} )

/**
 * @private
 * @method gulp _extendThree
 * @description Will convert/patch three, and output the result under `builds/tmp`. This dependencies are required in some Itee client modules.
 */
gulp.task( '_extendThree', ( done ) => {

    runSequence(
        'clean',
        [
            '_convert-orbit-controls-to-es6-module',
            '_convert-stereo-effect-to-es6-module',
            '_convert-anaglyph-effect-to-es6-module',
            '_convert-detector-to-es6-module'
        ],
        done
    )

} )

/**
 * @method npm run build
 * @description Will build itee client module using optional arguments, running clean and _extendThree tasks before. See help to further informations.
 */
gulp.task( 'build', [ '_extendThree' ], ( done ) => {

    const options = processArguments( process.argv )
    const configs = createBuildsConfigs( options )

    nextBuild()

    function processArguments ( processArgv ) {
        'use strict'

        let defaultOptions = {
            environments: [ 'development', 'production' ],
            formats:      [ 'amd', 'cjs', 'es', 'iife', 'umd' ],
            sourceMap:    false
        }

        const argv = processArgv.slice( 4 ) // Ignore nodejs, script paths and gulp params
        argv.forEach( argument => {

            if ( argument.indexOf( '-f' ) > -1 || argument.indexOf( '--format' ) > -1 ) {

                const splits    = argument.split( ':' )
                const splitPart = splits[ 1 ]

                defaultOptions.formats = []
                defaultOptions.formats.push( splitPart )

            } else if ( argument.indexOf( '-d' ) > -1 || argument.indexOf( '--dev' ) > -1 ) {

                defaultOptions.environments = []
                defaultOptions.environments.push( 'development' )

            } else if ( argument.indexOf( '-p' ) > -1 || argument.indexOf( '--prod' ) > -1 ) {

                defaultOptions.environments = []
                defaultOptions.environments.push( 'production' )

            } else if ( argument.indexOf( '-s' ) > -1 || argument.indexOf( '--sourcemap' ) > -1 ) {

                defaultOptions.sourceMap = true

            } else {

                throw new Error( `Build Script: invalid argument ${argument}. Type \`npm run help build\` to display available argument.` )

            }

        } )

        return defaultOptions

    }

    function createBuildsConfigs ( options ) {
        'use strict'

        let configs = []

        for ( let formatIndex = 0, numberOfFormats = options.formats.length ; formatIndex &lt; numberOfFormats ; ++formatIndex ) {
            const format = options.formats[ formatIndex ]

            for ( let envIndex = 0, numberOfEnvs = options.environments.length ; envIndex &lt; numberOfEnvs ; ++envIndex ) {
                const environment  = options.environments[ envIndex ]
                const onProduction = (environment === 'production')

                const config = require( './configs/rollup.conf' )( format, onProduction, options.sourceMap )

                configs.push( config )
            }
        }

        return configs

    }

    function nextBuild () {
        'use strict'

        if ( configs.length === 0 ) {
            done()
            return
        }

        build( configs.pop(), nextBuild )

    }

    function build ( config, done ) {

        log( `Building ${config.outputOptions.file}` )

        rollup.rollup( config.inputOptions )
              .then( ( bundle ) => {

                  bundle.write( config.outputOptions )
                        .catch( ( error ) => {
                            log( red( error ) )
                            done()
                        } )

                  done()
              } )
              .catch( ( error ) => {
                  log( red( error ) )
                  done()
              } )

    }

} )

/**
 * @method npm run release
 * @description Will perform a complet release of the library.
 */
gulp.task( 'release', ( done ) => {

    runSequence(
        'clean',
        '_extendThree',
        [
            'lint',
            'doc',
            'test'
        ],
        'build',
        done
    )

} )
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
